<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Ajax Restful API Example</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
        </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Josefin Sans', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #cfe0f3;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            margin: 0 auto;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        input[type="checkbox"] {
            margin-right: 5px;
        }

        button[type="submit"] {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button[type="submit"]:hover {
            background-color: #0056b3;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: #fff;
        }

        td:last-child {
            text-align: center;
        }

        button.deleteBtn {
            background-color: #dc3545;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
        }

        button.deleteBtn:hover {
            background-color: #c82333;
        }

        #todoTable {
            margin: 50px auto;
            width: 80%;
        }
        .crud-heading{
            margin-top: 120px;
            font-size: 40px;
            font-weight: 900;
        }
    </style>
</head>

<body>

    <div class="component-one-navbar">
        <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top ">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <img src="./Assets/shoe-name.svg" alt="Logo" class="d-inline-block align-text-center my-logo">

                </a>


                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                    <ul class="navbar-nav mx-auto mb-2 mb-lg-0  ">
                        <li class="nav-item px-3">
                            <a class="nav-link  " aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item px-3">
                            <a class="nav-link" href="#">About Us</a>
                        </li>
                        <li class="nav-item px-3">
                            <a class="nav-link" href="#">Categories</a>
                        </li>
                        <li class="nav-item px-3">
                            <a class="nav-link active" href="contact.html">Contact Us</a>
                        </li>
                        <li class="nav-item px-3">
                            <a class="nav-link" href="ajax_example.html">AJAX Example</a>
                        </li>
                    </ul>
                </div>
                <div class="nav-icons d-flex">
                    <button type="button" class="cart-btn">
                        <img src="./Assets/cart.svg" class="cart-icon m-2">
                        <data value="2" class="cart-badge">2</data>
                    </button>

                    <button type="button" class="cart-btn">
                        <img src="./Assets/heart.svg" class="cart-icon m-2">
                        <data value="2" class="cart-badge">2</data>
                    </button>
                </div>
            </div>

        </nav>
    </div>

    <h1 class="crud-heading"  >CRUD OPRERATIONS</h1>

    <form id="todoForm">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required><br>
        <label for="content">Content:</label>
        <textarea id="content" name="content" required></textarea><br>
        <label for="completed">Completed:</label>
        <input type="checkbox" id="completed" name="completed"><br>
        <button type="submit">Add Todo</button>
    </form>

    <table id="todoTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>TASK</th>
                <th>STATUS</th>
                <th>EDIT</th>
                <th>DELETE</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>


    <div class="component-eight-footer ">
        <div class="container footer-content">
            <div class="footer-heading">
                SNIK.COM
            </div>
            <div class="footer-icons-div ">
                <i class="bi bi-youtube footer-icons"></i>
                <i class="bi bi-twitter footer-icons"></i>
                <i class="bi bi-facebook footer-icons"></i>
                <i class="bi bi-whatsapp footer-icons"></i>
                <i class="bi bi-instagram footer-icons"></i>
            </div>
            <div class="author">
                Created by Muhammad Zain
            </div>

        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Function to fetch data from the API
            function fetchTodoList() {
                return $.ajax({
                    url: 'https://jsonplaceholder.typicode.com/todos',
                    method: 'GET',
                    dataType: 'json'
                });
            }

            // Function to populate the table with fetched data
            async function populateTodoTable() {
                const todoList = await fetchTodoList();
                const tableBody = $('#todoTable tbody');
                tableBody.empty();
                todoList.forEach(todo => {
                    const status = todo.completed ? 'Completed' : 'Incomplete';
                    const row = `<tr>
                            <td>${todo.id}</td>
                            <td>${todo.title}</td>
                            <td>${status}</td>
                            <td><input type="checkbox" ${todo.completed ? 'checked' : ''} data-id="${todo.id}" class="editStatus"></td>
                            <td><button class="deleteBtn" data-id="${todo.id}">Delete</button></td>
                        </tr>`;
                    tableBody.append(row);
                });
            }

            // Function to add a new todo item
            $('#todoForm').submit(function (event) {
                event.preventDefault();
                const title = $('#title').val();
                const content = $('#content').val();
                const completed = $('#completed').prop('checked');
                $.ajax({
                    url: 'https://jsonplaceholder.typicode.com/todos',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        title: title,
                        content: content,
                        completed: completed
                    }),
                    success: function () {
                        populateTodoTable();
                        $('#todoForm')[0].reset();
                    },
                    error: function () {
                        alert('Failed to add todo item');
                    }
                });
            });

            // Function to edit the status of a todo item
            $(document).on('change', '.editStatus', function () {
                const id = $(this).data('id');
                const completed = $(this).prop('checked');
                $.ajax({
                    url: `https://jsonplaceholder.typicode.com/todos/${id}`,
                    method: 'PATCH',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        completed: completed
                    }),
                    success: function () {
                        populateTodoTable();
                    },
                    error: function () {
                        alert('Failed to edit todo item');
                    }
                });
            });

            // Function to delete a todo item
            $(document).on('click', '.deleteBtn', function () {
                const id = $(this).data('id');
                $.ajax({
                    url: `https://jsonplaceholder.typicode.com/todos/${id}`,
                    method: 'DELETE',
                    success: function () {
                        populateTodoTable();
                    },
                    error: function () {
                        alert('Failed to delete todo item');
                    }
                });
            });

            // Populate the table when the page loads
            populateTodoTable();
        });
    </script>
</body>

</html>